<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 16 Downloading DEMs and delineating watersheds (5 pts) | Watershed Analysis: ENSC 445/LRES 545</title>
  <meta name="description" content="Chapter 16 Downloading DEMs and delineating watersheds (5 pts) | Watershed Analysis: ENSC 445/LRES 545" />
  <meta name="generator" content="bookdown 0.35 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 16 Downloading DEMs and delineating watersheds (5 pts) | Watershed Analysis: ENSC 445/LRES 545" />
  <meta property="og:type" content="book" />
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 16 Downloading DEMs and delineating watersheds (5 pts) | Watershed Analysis: ENSC 445/LRES 545" />
  
  
  

<meta name="author" content="Tim Covino" />


<meta name="date" content="2024-04-04" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="for-loops.html"/>

<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<link href="libs/htmltools-fill-0.5.8/fill.css" rel="stylesheet" />
<script src="libs/htmlwidgets-1.6.4/htmlwidgets.js"></script>
<script src="libs/plotly-binding-4.10.4/plotly.js"></script>
<script src="libs/typedarray-0.1/typedarray.min.js"></script>
<link href="libs/crosstalk-1.2.1/css/crosstalk.min.css" rel="stylesheet" />
<script src="libs/crosstalk-1.2.1/js/crosstalk.min.js"></script>
<link href="libs/plotly-htmlwidgets-css-2.11.1/plotly-htmlwidgets.css" rel="stylesheet" />
<script src="libs/plotly-main-2.11.1/plotly-latest.min.js"></script>
<link href="libs/leaflet-1.3.1/leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-1.3.1/leaflet.js"></script>
<link href="libs/leafletfix-1.0.0/leafletfix.css" rel="stylesheet" />
<script src="libs/proj4-2.6.2/proj4.min.js"></script>
<script src="libs/Proj4Leaflet-1.0.1/proj4leaflet.js"></script>
<link href="libs/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-binding-2.2.2/leaflet.js"></script>
<script src="libs/leaflet-providers-2.0.0/leaflet-providers_2.0.0.js"></script>
<script src="libs/leaflet-providers-plugin-2.2.2/leaflet-providers-plugin.js"></script>
<link href="libs/leaflet-awesomemarkers-2.0.3/leaflet.awesome-markers.css" rel="stylesheet" />
<script src="libs/leaflet-awesomemarkers-2.0.3/leaflet.awesome-markers.min.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Watershed Analysis</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction</a>
<ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#course-overview-and-objectives"><i class="fa fa-check"></i><b>1.1</b> Course overview and objectives</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#structure"><i class="fa fa-check"></i><b>1.2</b> Structure</a></li>
<li class="chapter" data-level="1.3" data-path="index.html"><a href="index.html#tentative-schedule-subject-to-change"><i class="fa fa-check"></i><b>1.3</b> Tentative schedule, subject to change</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="intro-to-data-visualization.html"><a href="intro-to-data-visualization.html"><i class="fa fa-check"></i><b>2</b> Intro to data visualization</a>
<ul>
<li class="chapter" data-level="2.1" data-path="intro-to-data-visualization.html"><a href="intro-to-data-visualization.html#learning-objectives"><i class="fa fa-check"></i><b>2.1</b> Learning Objectives</a></li>
<li class="chapter" data-level="2.2" data-path="intro-to-data-visualization.html"><a href="intro-to-data-visualization.html#download-and-install-tidyverse-library"><i class="fa fa-check"></i><b>2.2</b> Download and install tidyverse library</a></li>
<li class="chapter" data-level="2.3" data-path="intro-to-data-visualization.html"><a href="intro-to-data-visualization.html#reading-data"><i class="fa fa-check"></i><b>2.3</b> Reading data</a></li>
<li class="chapter" data-level="2.4" data-path="intro-to-data-visualization.html"><a href="intro-to-data-visualization.html#our-first-ggplot"><i class="fa fa-check"></i><b>2.4</b> Our first ggplot</a></li>
<li class="chapter" data-level="2.5" data-path="intro-to-data-visualization.html"><a href="intro-to-data-visualization.html#change-point-type"><i class="fa fa-check"></i><b>2.5</b> Change point type</a></li>
<li class="chapter" data-level="2.6" data-path="intro-to-data-visualization.html"><a href="intro-to-data-visualization.html#set-colors"><i class="fa fa-check"></i><b>2.6</b> Set colors</a></li>
<li class="chapter" data-level="2.7" data-path="intro-to-data-visualization.html"><a href="intro-to-data-visualization.html#controlling-color-with-a-third-variable-and-other-functions"><i class="fa fa-check"></i><b>2.7</b> Controlling color with a third variable and other functions</a></li>
<li class="chapter" data-level="2.8" data-path="intro-to-data-visualization.html"><a href="intro-to-data-visualization.html#plotting-multiple-groups-adding-a-third-variable"><i class="fa fa-check"></i><b>2.8</b> Plotting multiple groups (adding a third variable)</a></li>
<li class="chapter" data-level="2.9" data-path="intro-to-data-visualization.html"><a href="intro-to-data-visualization.html#facets"><i class="fa fa-check"></i><b>2.9</b> Facets</a></li>
<li class="chapter" data-level="2.10" data-path="intro-to-data-visualization.html"><a href="intro-to-data-visualization.html#two-variable-faceting"><i class="fa fa-check"></i><b>2.10</b> Two variable faceting</a></li>
<li class="chapter" data-level="2.11" data-path="intro-to-data-visualization.html"><a href="intro-to-data-visualization.html#boxplots"><i class="fa fa-check"></i><b>2.11</b> Boxplots</a></li>
<li class="chapter" data-level="2.12" data-path="intro-to-data-visualization.html"><a href="intro-to-data-visualization.html#more-about-color-size-etc"><i class="fa fa-check"></i><b>2.12</b> More about color, size, etc</a></li>
<li class="chapter" data-level="2.13" data-path="intro-to-data-visualization.html"><a href="intro-to-data-visualization.html#multiple-geoms"><i class="fa fa-check"></i><b>2.13</b> Multiple geoms</a></li>
<li class="chapter" data-level="2.14" data-path="intro-to-data-visualization.html"><a href="intro-to-data-visualization.html#exit-ticket"><i class="fa fa-check"></i><b>2.14</b> Exit ticket</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="data-wrangling-using-tidyverse.html"><a href="data-wrangling-using-tidyverse.html"><i class="fa fa-check"></i><b>3</b> Data wrangling using tidyverse</a>
<ul>
<li class="chapter" data-level="3.1" data-path="data-wrangling-using-tidyverse.html"><a href="data-wrangling-using-tidyverse.html#introduction-1"><i class="fa fa-check"></i><b>3.1</b> Introduction</a></li>
<li class="chapter" data-level="3.2" data-path="data-wrangling-using-tidyverse.html"><a href="data-wrangling-using-tidyverse.html#learning-objectives-1"><i class="fa fa-check"></i><b>3.2</b> Learning objectives:</a></li>
<li class="chapter" data-level="3.3" data-path="data-wrangling-using-tidyverse.html"><a href="data-wrangling-using-tidyverse.html#you-can-use-r-as-a-calculator"><i class="fa fa-check"></i><b>3.3</b> You can use R as a calculator</a></li>
<li class="chapter" data-level="3.4" data-path="data-wrangling-using-tidyverse.html"><a href="data-wrangling-using-tidyverse.html#you-can-create-new-objects-using--"><i class="fa fa-check"></i><b>3.4</b> You can create new objects using &lt;-</a></li>
<li class="chapter" data-level="3.5" data-path="data-wrangling-using-tidyverse.html"><a href="data-wrangling-using-tidyverse.html#using-functions"><i class="fa fa-check"></i><b>3.5</b> Using functions</a></li>
<li class="chapter" data-level="3.6" data-path="data-wrangling-using-tidyverse.html"><a href="data-wrangling-using-tidyverse.html#read-in-some-data"><i class="fa fa-check"></i><b>3.6</b> Read in some data</a></li>
<li class="chapter" data-level="3.7" data-path="data-wrangling-using-tidyverse.html"><a href="data-wrangling-using-tidyverse.html#what-is-a-tibble"><i class="fa fa-check"></i><b>3.7</b> What is a tibble?</a></li>
<li class="chapter" data-level="3.8" data-path="data-wrangling-using-tidyverse.html"><a href="data-wrangling-using-tidyverse.html#data-wrangling-in-dplyr"><i class="fa fa-check"></i><b>3.8</b> Data wrangling in dplyr</a></li>
<li class="chapter" data-level="3.9" data-path="data-wrangling-using-tidyverse.html"><a href="data-wrangling-using-tidyverse.html#filter"><i class="fa fa-check"></i><b>3.9</b> Filter</a>
<ul>
<li class="chapter" data-level="3.9.1" data-path="data-wrangling-using-tidyverse.html"><a href="data-wrangling-using-tidyverse.html#multiple-conditions"><i class="fa fa-check"></i><b>3.9.1</b> Multiple conditions</a></li>
</ul></li>
<li class="chapter" data-level="3.10" data-path="data-wrangling-using-tidyverse.html"><a href="data-wrangling-using-tidyverse.html#arrange"><i class="fa fa-check"></i><b>3.10</b> Arrange</a></li>
<li class="chapter" data-level="3.11" data-path="data-wrangling-using-tidyverse.html"><a href="data-wrangling-using-tidyverse.html#select"><i class="fa fa-check"></i><b>3.11</b> Select</a></li>
<li class="chapter" data-level="3.12" data-path="data-wrangling-using-tidyverse.html"><a href="data-wrangling-using-tidyverse.html#mutate"><i class="fa fa-check"></i><b>3.12</b> Mutate</a></li>
<li class="chapter" data-level="3.13" data-path="data-wrangling-using-tidyverse.html"><a href="data-wrangling-using-tidyverse.html#summarize"><i class="fa fa-check"></i><b>3.13</b> Summarize</a></li>
<li class="chapter" data-level="3.14" data-path="data-wrangling-using-tidyverse.html"><a href="data-wrangling-using-tidyverse.html#multiple-operations-with-pipes"><i class="fa fa-check"></i><b>3.14</b> Multiple operations with pipes</a></li>
<li class="chapter" data-level="3.15" data-path="data-wrangling-using-tidyverse.html"><a href="data-wrangling-using-tidyverse.html#a-final-comment-on-nas"><i class="fa fa-check"></i><b>3.15</b> A final comment on NAs</a></li>
<li class="chapter" data-level="3.16" data-path="data-wrangling-using-tidyverse.html"><a href="data-wrangling-using-tidyverse.html#thats-it-for-today"><i class="fa fa-check"></i><b>3.16</b> That’s it for today</a></li>
<li class="chapter" data-level="3.17" data-path="data-wrangling-using-tidyverse.html"><a href="data-wrangling-using-tidyverse.html#exit-ticket-1"><i class="fa fa-check"></i><b>3.17</b> Exit ticket</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="lab-1-data-vis-wrangling-and-programming-12-pts.html"><a href="lab-1-data-vis-wrangling-and-programming-12-pts.html"><i class="fa fa-check"></i><b>4</b> Lab 1: Data vis, wrangling, and programming (12 pts)</a>
<ul>
<li class="chapter" data-level="4.1" data-path="lab-1-data-vis-wrangling-and-programming-12-pts.html"><a href="lab-1-data-vis-wrangling-and-programming-12-pts.html#problem-1-1-pts"><i class="fa fa-check"></i><b>4.1</b> Problem 1 (1 pts)</a></li>
<li class="chapter" data-level="4.2" data-path="lab-1-data-vis-wrangling-and-programming-12-pts.html"><a href="lab-1-data-vis-wrangling-and-programming-12-pts.html#problem-2-1-pts"><i class="fa fa-check"></i><b>4.2</b> Problem 2 (1 pts)</a></li>
<li class="chapter" data-level="4.3" data-path="lab-1-data-vis-wrangling-and-programming-12-pts.html"><a href="lab-1-data-vis-wrangling-and-programming-12-pts.html#problem-3-2-pts"><i class="fa fa-check"></i><b>4.3</b> Problem 3 (2 pts)</a></li>
<li class="chapter" data-level="4.4" data-path="lab-1-data-vis-wrangling-and-programming-12-pts.html"><a href="lab-1-data-vis-wrangling-and-programming-12-pts.html#problem-4-2-pts"><i class="fa fa-check"></i><b>4.4</b> Problem 4 (2 pts)</a></li>
<li class="chapter" data-level="4.5" data-path="lab-1-data-vis-wrangling-and-programming-12-pts.html"><a href="lab-1-data-vis-wrangling-and-programming-12-pts.html#problem-5-2-pts"><i class="fa fa-check"></i><b>4.5</b> Problem 5 (2 pts)</a></li>
<li class="chapter" data-level="4.6" data-path="lab-1-data-vis-wrangling-and-programming-12-pts.html"><a href="lab-1-data-vis-wrangling-and-programming-12-pts.html#problem-6-2-pts"><i class="fa fa-check"></i><b>4.6</b> Problem 6 (2 pts)</a></li>
<li class="chapter" data-level="4.7" data-path="lab-1-data-vis-wrangling-and-programming-12-pts.html"><a href="lab-1-data-vis-wrangling-and-programming-12-pts.html#summary-2-pts"><i class="fa fa-check"></i><b>4.7</b> Summary (2 pts)</a></li>
<li class="chapter" data-level="4.8" data-path="lab-1-data-vis-wrangling-and-programming-12-pts.html"><a href="lab-1-data-vis-wrangling-and-programming-12-pts.html#feeback"><i class="fa fa-check"></i><b>4.8</b> Feeback</a></li>
<li class="chapter" data-level="4.9" data-path="lab-1-data-vis-wrangling-and-programming-12-pts.html"><a href="lab-1-data-vis-wrangling-and-programming-12-pts.html#deliverables"><i class="fa fa-check"></i><b>4.9</b> Deliverables</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="dataretrieval.html"><a href="dataretrieval.html"><i class="fa fa-check"></i><b>5</b> dataRetrieval</a>
<ul>
<li class="chapter" data-level="5.1" data-path="dataretrieval.html"><a href="dataretrieval.html#goals"><i class="fa fa-check"></i><b>5.1</b> Goals</a></li>
<li class="chapter" data-level="5.2" data-path="dataretrieval.html"><a href="dataretrieval.html#exploring-what-dataretrieval-can-do"><i class="fa fa-check"></i><b>5.2</b> Exploring what dataRetrieval can do</a></li>
<li class="chapter" data-level="5.3" data-path="dataretrieval.html"><a href="dataretrieval.html#first-lets-map-these-sites."><i class="fa fa-check"></i><b>5.3</b> First, let’s map these sites.</a></li>
<li class="chapter" data-level="5.4" data-path="dataretrieval.html"><a href="dataretrieval.html#joins"><i class="fa fa-check"></i><b>5.4</b> Joins</a></li>
<li class="chapter" data-level="5.5" data-path="dataretrieval.html"><a href="dataretrieval.html#join-practice-example"><i class="fa fa-check"></i><b>5.5</b> Join practice example</a></li>
<li class="chapter" data-level="5.6" data-path="dataretrieval.html"><a href="dataretrieval.html#now-we-know-what-is-available-so-lets-download-some-data-from-the-gallatin-site-using-readnwisdata."><i class="fa fa-check"></i><b>5.6</b> Now we know what is available so let’s download some data from the Gallatin site using “readNWISdata”.</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="lab-2-dataretrieval-and-area-normalized-flows-20-pts.html"><a href="lab-2-dataretrieval-and-area-normalized-flows-20-pts.html"><i class="fa fa-check"></i><b>6</b> Lab 2: dataRetrieval and area normalized flows (20 pts)</a>
<ul>
<li class="chapter" data-level="6.1" data-path="lab-2-dataretrieval-and-area-normalized-flows-20-pts.html"><a href="lab-2-dataretrieval-and-area-normalized-flows-20-pts.html#intro"><i class="fa fa-check"></i><b>6.1</b> Intro</a>
<ul>
<li class="chapter" data-level="6.1.1" data-path="lab-2-dataretrieval-and-area-normalized-flows-20-pts.html"><a href="lab-2-dataretrieval-and-area-normalized-flows-20-pts.html#this-is-knitr-settings.-knitr-is-a-package-that-will-turn-this-rmd-to-an-html."><i class="fa fa-check"></i><b>6.1.1</b> This is knitr settings. Knitr is a package that will turn this Rmd to an html.</a></li>
<li class="chapter" data-level="6.1.2" data-path="lab-2-dataretrieval-and-area-normalized-flows-20-pts.html"><a href="lab-2-dataretrieval-and-area-normalized-flows-20-pts.html#load-the-necessary-packages."><i class="fa fa-check"></i><b>6.1.2</b> Load the necessary packages.</a></li>
<li class="chapter" data-level="6.1.3" data-path="lab-2-dataretrieval-and-area-normalized-flows-20-pts.html"><a href="lab-2-dataretrieval-and-area-normalized-flows-20-pts.html#workflow"><i class="fa fa-check"></i><b>6.1.3</b> Workflow</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="lab-2-dataretrieval-and-area-normalized-flows-20-pts.html"><a href="lab-2-dataretrieval-and-area-normalized-flows-20-pts.html#summary-14-pts"><i class="fa fa-check"></i><b>6.2</b> Summary (14 pts)</a></li>
<li class="chapter" data-level="6.3" data-path="lab-2-dataretrieval-and-area-normalized-flows-20-pts.html"><a href="lab-2-dataretrieval-and-area-normalized-flows-20-pts.html#deliverable-6-pts"><i class="fa fa-check"></i><b>6.3</b> Deliverable (6 pts)</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="statistics-in-hydrology.html"><a href="statistics-in-hydrology.html"><i class="fa fa-check"></i><b>7</b> Statistics in hydrology</a>
<ul>
<li class="chapter" data-level="7.1" data-path="statistics-in-hydrology.html"><a href="statistics-in-hydrology.html#learning-objectives-2"><i class="fa fa-check"></i><b>7.1</b> Learning objectives</a></li>
<li class="chapter" data-level="7.2" data-path="statistics-in-hydrology.html"><a href="statistics-in-hydrology.html#homework-q1-2-pts"><i class="fa fa-check"></i><b>7.2</b> Homework Q1 (2 pts)</a></li>
<li class="chapter" data-level="7.3" data-path="statistics-in-hydrology.html"><a href="statistics-in-hydrology.html#what-is-the-difference-between-a-sample-and-a-population"><i class="fa fa-check"></i><b>7.3</b> What is the difference between a sample and a population?</a></li>
<li class="chapter" data-level="7.4" data-path="statistics-in-hydrology.html"><a href="statistics-in-hydrology.html#homework-q2-2-pts"><i class="fa fa-check"></i><b>7.4</b> Homework Q2 (2 pts)</a></li>
<li class="chapter" data-level="7.5" data-path="statistics-in-hydrology.html"><a href="statistics-in-hydrology.html#measuring-our-sample-distribution-central-tendency"><i class="fa fa-check"></i><b>7.5</b> Measuring our sample distribution: central tendency</a></li>
<li class="chapter" data-level="7.6" data-path="statistics-in-hydrology.html"><a href="statistics-in-hydrology.html#so-whats-a-weighted-average"><i class="fa fa-check"></i><b>7.6</b> So what’s a weighted average?</a></li>
<li class="chapter" data-level="7.7" data-path="statistics-in-hydrology.html"><a href="statistics-in-hydrology.html#measures-of-variability"><i class="fa fa-check"></i><b>7.7</b> Measures of variability</a></li>
<li class="chapter" data-level="7.8" data-path="statistics-in-hydrology.html"><a href="statistics-in-hydrology.html#homework-q3-2-pts"><i class="fa fa-check"></i><b>7.8</b> Homework Q3 (2 pts)</a></li>
<li class="chapter" data-level="7.9" data-path="statistics-in-hydrology.html"><a href="statistics-in-hydrology.html#what-is-a-normal-distribution-and-how-can-we-determine-if-we-have-one"><i class="fa fa-check"></i><b>7.9</b> What is a normal distribution and how can we determine if we have one?</a></li>
<li class="chapter" data-level="7.10" data-path="statistics-in-hydrology.html"><a href="statistics-in-hydrology.html#homework-q4-2-pts"><i class="fa fa-check"></i><b>7.10</b> Homework Q4 (2 pts)</a></li>
<li class="chapter" data-level="7.11" data-path="statistics-in-hydrology.html"><a href="statistics-in-hydrology.html#homework-q5-2-pts"><i class="fa fa-check"></i><b>7.11</b> Homework Q5 (2 pts)</a></li>
<li class="chapter" data-level="7.12" data-path="statistics-in-hydrology.html"><a href="statistics-in-hydrology.html#deliverable-10-pts-due-thursday-215-by-1159-pm"><i class="fa fa-check"></i><b>7.12</b> Deliverable (10 pts, due Thursday 2/15 by 11:59 PM)</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="lab-3-statistics-in-hydrology-33-pts.html"><a href="lab-3-statistics-in-hydrology-33-pts.html"><i class="fa fa-check"></i><b>8</b> Lab 3: Statistics in hydrology (33 pts)</a>
<ul>
<li class="chapter" data-level="8.1" data-path="lab-3-statistics-in-hydrology-33-pts.html"><a href="lab-3-statistics-in-hydrology-33-pts.html#problem-1-5-pts"><i class="fa fa-check"></i><b>8.1</b> Problem 1 (5 pts)</a></li>
<li class="chapter" data-level="8.2" data-path="lab-3-statistics-in-hydrology-33-pts.html"><a href="lab-3-statistics-in-hydrology-33-pts.html#problem-2-5-pts"><i class="fa fa-check"></i><b>8.2</b> Problem 2 (5 pts)</a></li>
<li class="chapter" data-level="8.3" data-path="lab-3-statistics-in-hydrology-33-pts.html"><a href="lab-3-statistics-in-hydrology-33-pts.html#problem-3-5-pts"><i class="fa fa-check"></i><b>8.3</b> Problem 3 (5 pts)</a></li>
<li class="chapter" data-level="8.4" data-path="lab-3-statistics-in-hydrology-33-pts.html"><a href="lab-3-statistics-in-hydrology-33-pts.html#problem-4-5-pts"><i class="fa fa-check"></i><b>8.4</b> Problem 4 (5 pts)</a></li>
<li class="chapter" data-level="8.5" data-path="lab-3-statistics-in-hydrology-33-pts.html"><a href="lab-3-statistics-in-hydrology-33-pts.html#problem-5-5-pts"><i class="fa fa-check"></i><b>8.5</b> Problem 5 (5 pts)</a></li>
<li class="chapter" data-level="8.6" data-path="lab-3-statistics-in-hydrology-33-pts.html"><a href="lab-3-statistics-in-hydrology-33-pts.html#problem-6-5-pts"><i class="fa fa-check"></i><b>8.6</b> Problem 6 (5 pts)</a></li>
<li class="chapter" data-level="8.7" data-path="lab-3-statistics-in-hydrology-33-pts.html"><a href="lab-3-statistics-in-hydrology-33-pts.html#deliverable"><i class="fa fa-check"></i><b>8.7</b> Deliverable</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="hydrographs-and-rating-curves-6-pts.html"><a href="hydrographs-and-rating-curves-6-pts.html"><i class="fa fa-check"></i><b>9</b> Hydrographs and rating curves (6 pts)</a>
<ul>
<li class="chapter" data-level="9.1" data-path="hydrographs-and-rating-curves-6-pts.html"><a href="hydrographs-and-rating-curves-6-pts.html#overall-learning-objectives"><i class="fa fa-check"></i><b>9.1</b> Overall Learning Objectives</a></li>
<li class="chapter" data-level="9.2" data-path="hydrographs-and-rating-curves-6-pts.html"><a href="hydrographs-and-rating-curves-6-pts.html#reading"><i class="fa fa-check"></i><b>9.2</b> Reading</a></li>
<li class="chapter" data-level="9.3" data-path="hydrographs-and-rating-curves-6-pts.html"><a href="hydrographs-and-rating-curves-6-pts.html#lecture"><i class="fa fa-check"></i><b>9.3</b> Lecture</a>
<ul>
<li class="chapter" data-level="9.3.1" data-path="hydrographs-and-rating-curves-6-pts.html"><a href="hydrographs-and-rating-curves-6-pts.html#hydrographs-and-rating-curves"><i class="fa fa-check"></i><b>9.3.1</b> Hydrographs and Rating Curves</a></li>
<li class="chapter" data-level="9.3.2" data-path="hydrographs-and-rating-curves-6-pts.html"><a href="hydrographs-and-rating-curves-6-pts.html#rain-versus-snow-dominated-systems"><i class="fa fa-check"></i><b>9.3.2</b> Rain versus Snow dominated systems</a></li>
<li class="chapter" data-level="9.3.3" data-path="hydrographs-and-rating-curves-6-pts.html"><a href="hydrographs-and-rating-curves-6-pts.html#field-measurements-of-area-velocity"><i class="fa fa-check"></i><b>9.3.3</b> Field Measurements of Area-Velocity</a></li>
<li class="chapter" data-level="9.3.4" data-path="hydrographs-and-rating-curves-6-pts.html"><a href="hydrographs-and-rating-curves-6-pts.html#making-stage-measurements"><i class="fa fa-check"></i><b>9.3.4</b> Making Stage Measurements</a></li>
<li class="chapter" data-level="9.3.5" data-path="hydrographs-and-rating-curves-6-pts.html"><a href="hydrographs-and-rating-curves-6-pts.html#applications-of-streamflow-and-stream-gage"><i class="fa fa-check"></i><b>9.3.5</b> Applications of streamflow and stream gage</a></li>
</ul></li>
<li class="chapter" data-level="9.4" data-path="hydrographs-and-rating-curves-6-pts.html"><a href="hydrographs-and-rating-curves-6-pts.html#optional-activity-to-gain-deeper-understanding-of-rating-curve"><i class="fa fa-check"></i><b>9.4</b> Optional activity to gain deeper understanding of rating curve</a></li>
<li class="chapter" data-level="9.5" data-path="hydrographs-and-rating-curves-6-pts.html"><a href="hydrographs-and-rating-curves-6-pts.html#summary-questions-and-deliverable-6-pts"><i class="fa fa-check"></i><b>9.5</b> Summary questions and deliverable (6 pts)</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="lab-4-rating-cuve-lab-15-pts.html"><a href="lab-4-rating-cuve-lab-15-pts.html"><i class="fa fa-check"></i><b>10</b> Lab 4: Rating cuve lab (15 pts)</a>
<ul>
<li class="chapter" data-level="10.1" data-path="lab-4-rating-cuve-lab-15-pts.html"><a href="lab-4-rating-cuve-lab-15-pts.html#problem-1"><i class="fa fa-check"></i><b>10.1</b> Problem 1</a>
<ul>
<li class="chapter" data-level="10.1.1" data-path="lab-4-rating-cuve-lab-15-pts.html"><a href="lab-4-rating-cuve-lab-15-pts.html#q1.1.-3-pts"><i class="fa fa-check"></i><b>10.1.1</b> Q1.1. (3 pts)</a></li>
</ul></li>
<li class="chapter" data-level="10.2" data-path="lab-4-rating-cuve-lab-15-pts.html"><a href="lab-4-rating-cuve-lab-15-pts.html#problem-2"><i class="fa fa-check"></i><b>10.2</b> Problem 2</a>
<ul>
<li class="chapter" data-level="10.2.1" data-path="lab-4-rating-cuve-lab-15-pts.html"><a href="lab-4-rating-cuve-lab-15-pts.html#q2.1.-2-pt"><i class="fa fa-check"></i><b>10.2.1</b> Q2.1. (2 pt)</a></li>
</ul></li>
<li class="chapter" data-level="10.3" data-path="lab-4-rating-cuve-lab-15-pts.html"><a href="lab-4-rating-cuve-lab-15-pts.html#problem-3"><i class="fa fa-check"></i><b>10.3</b> Problem 3</a>
<ul>
<li class="chapter" data-level="10.3.1" data-path="lab-4-rating-cuve-lab-15-pts.html"><a href="lab-4-rating-cuve-lab-15-pts.html#q3.1.-5-pts"><i class="fa fa-check"></i><b>10.3.1</b> Q3.1. (5 pts)</a></li>
</ul></li>
<li class="chapter" data-level="10.4" data-path="lab-4-rating-cuve-lab-15-pts.html"><a href="lab-4-rating-cuve-lab-15-pts.html#problem-4"><i class="fa fa-check"></i><b>10.4</b> Problem 4</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="flow-duration-curves-12-pts.html"><a href="flow-duration-curves-12-pts.html"><i class="fa fa-check"></i><b>11</b> Flow Duration Curves (12 pts)</a>
<ul>
<li class="chapter" data-level="11.1" data-path="flow-duration-curves-12-pts.html"><a href="flow-duration-curves-12-pts.html#lecture-1"><i class="fa fa-check"></i><b>11.1</b> Lecture</a></li>
<li class="chapter" data-level="11.2" data-path="flow-duration-curves-12-pts.html"><a href="flow-duration-curves-12-pts.html#reading-1"><i class="fa fa-check"></i><b>11.2</b> Reading</a></li>
<li class="chapter" data-level="11.3" data-path="flow-duration-curves-12-pts.html"><a href="flow-duration-curves-12-pts.html#packages-and-coding"><i class="fa fa-check"></i><b>11.3</b> Packages and coding</a></li>
<li class="chapter" data-level="11.4" data-path="flow-duration-curves-12-pts.html"><a href="flow-duration-curves-12-pts.html#get-data"><i class="fa fa-check"></i><b>11.4</b> Get data</a></li>
<li class="chapter" data-level="11.5" data-path="flow-duration-curves-12-pts.html"><a href="flow-duration-curves-12-pts.html#review-describe-the-distribution"><i class="fa fa-check"></i><b>11.5</b> Review: describe the distribution</a></li>
<li class="chapter" data-level="11.6" data-path="flow-duration-curves-12-pts.html"><a href="flow-duration-curves-12-pts.html#ecdfs"><i class="fa fa-check"></i><b>11.6</b> ECDFs</a></li>
<li class="chapter" data-level="11.7" data-path="flow-duration-curves-12-pts.html"><a href="flow-duration-curves-12-pts.html#calculate-flow-exceedence-probabilities"><i class="fa fa-check"></i><b>11.7</b> Calculate flow exceedence probabilities</a></li>
<li class="chapter" data-level="11.8" data-path="flow-duration-curves-12-pts.html"><a href="flow-duration-curves-12-pts.html#plot-a-flow-duration-curve-using-the-probabilities"><i class="fa fa-check"></i><b>11.8</b> Plot a Flow Duration Curve using the probabilities</a></li>
<li class="chapter" data-level="11.9" data-path="flow-duration-curves-12-pts.html"><a href="flow-duration-curves-12-pts.html#example-use-of-an-fdc"><i class="fa fa-check"></i><b>11.9</b> Example use of an FDC</a></li>
<li class="chapter" data-level="11.10" data-path="flow-duration-curves-12-pts.html"><a href="flow-duration-curves-12-pts.html#module-question-1-2-pts-describe-the-differences-in-flow-regime-you-see-between-the-three-periods-of-1960-1980-1980-2000-and-2000-2020."><i class="fa fa-check"></i><b>11.10</b> Module Question 1 (2 pts): Describe the differences in flow regime you see between the three periods of 1960-1980, 1980-2000, and 2000-2020.</a></li>
<li class="chapter" data-level="11.11" data-path="flow-duration-curves-12-pts.html"><a href="flow-duration-curves-12-pts.html#compare-to-a-boxplot-of-the-same-data"><i class="fa fa-check"></i><b>11.11</b> Compare to a boxplot of the same data</a></li>
<li class="chapter" data-level="11.12" data-path="flow-duration-curves-12-pts.html"><a href="flow-duration-curves-12-pts.html#module-question-2-2-pts-what-are-the-advantagesdisadvantages-of-the-flow-duration-curves-vs.-boxplots"><i class="fa fa-check"></i><b>11.12</b> Module Question 2 (2 pts): What are the advantages/disadvantages of the flow duration curves vs. boxplots?</a></li>
<li class="chapter" data-level="11.13" data-path="flow-duration-curves-12-pts.html"><a href="flow-duration-curves-12-pts.html#module-summary-assignment-examining-flow-regime-change-at-the-grand-canyon-12-pts"><i class="fa fa-check"></i><b>11.13</b> Module Summary Assignment: Examining flow regime change at the Grand Canyon (12 pts)</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="lab-5-low-flow-analysis-15-pts.html"><a href="lab-5-low-flow-analysis-15-pts.html"><i class="fa fa-check"></i><b>12</b> Lab 5: Low Flow Analysis (15 pts)</a>
<ul>
<li class="chapter" data-level="12.1" data-path="lab-5-low-flow-analysis-15-pts.html"><a href="lab-5-low-flow-analysis-15-pts.html#what-are-low-flow-statistics"><i class="fa fa-check"></i><b>12.1</b> What are low flow statistics?</a></li>
<li class="chapter" data-level="12.2" data-path="lab-5-low-flow-analysis-15-pts.html"><a href="lab-5-low-flow-analysis-15-pts.html#get-data-1"><i class="fa fa-check"></i><b>12.2</b> Get data</a></li>
<li class="chapter" data-level="12.3" data-path="lab-5-low-flow-analysis-15-pts.html"><a href="lab-5-low-flow-analysis-15-pts.html#create-the-x-days-average-flow-record"><i class="fa fa-check"></i><b>12.3</b> Create the X days average flow record</a></li>
<li class="chapter" data-level="12.4" data-path="lab-5-low-flow-analysis-15-pts.html"><a href="lab-5-low-flow-analysis-15-pts.html#look-at-what-a-rolling-mean-does."><i class="fa fa-check"></i><b>12.4</b> Look at what a rolling mean does.</a></li>
<li class="chapter" data-level="12.5" data-path="lab-5-low-flow-analysis-15-pts.html"><a href="lab-5-low-flow-analysis-15-pts.html#calculate-yearly-minimums"><i class="fa fa-check"></i><b>12.5</b> Calculate yearly minimums</a>
<ul>
<li class="chapter" data-level="12.5.1" data-path="lab-5-low-flow-analysis-15-pts.html"><a href="lab-5-low-flow-analysis-15-pts.html#challenge"><i class="fa fa-check"></i><b>12.5.1</b> Challenge</a></li>
</ul></li>
<li class="chapter" data-level="12.6" data-path="lab-5-low-flow-analysis-15-pts.html"><a href="lab-5-low-flow-analysis-15-pts.html#calculate-return-interval"><i class="fa fa-check"></i><b>12.6</b> Calculate return interval</a></li>
<li class="chapter" data-level="12.7" data-path="lab-5-low-flow-analysis-15-pts.html"><a href="lab-5-low-flow-analysis-15-pts.html#fit-to-pearson-type-iii-distribution"><i class="fa fa-check"></i><b>12.7</b> Fit to Pearson Type III distribution</a></li>
<li class="chapter" data-level="12.8" data-path="lab-5-low-flow-analysis-15-pts.html"><a href="lab-5-low-flow-analysis-15-pts.html#deliverable---summary-questions-12-pts"><i class="fa fa-check"></i><b>12.8</b> Deliverable - Summary questions (12 pts)</a>
<ul>
<li class="chapter" data-level="12.8.1" data-path="lab-5-low-flow-analysis-15-pts.html"><a href="lab-5-low-flow-analysis-15-pts.html#question-1-6-pts"><i class="fa fa-check"></i><b>12.8.1</b> Question 1 (6 pts)</a></li>
<li class="chapter" data-level="12.8.2" data-path="lab-5-low-flow-analysis-15-pts.html"><a href="lab-5-low-flow-analysis-15-pts.html#question-2-3-pts"><i class="fa fa-check"></i><b>12.8.2</b> Question 2 (3 pts)</a></li>
<li class="chapter" data-level="12.8.3" data-path="lab-5-low-flow-analysis-15-pts.html"><a href="lab-5-low-flow-analysis-15-pts.html#question-3-6-pts"><i class="fa fa-check"></i><b>12.8.3</b> Question 3 (6 pts)</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="13" data-path="functions.html"><a href="functions.html"><i class="fa fa-check"></i><b>13</b> Functions</a>
<ul>
<li class="chapter" data-level="13.1" data-path="functions.html"><a href="functions.html#reading-on-functions-from-rds-by-hadley-wickham"><i class="fa fa-check"></i><b>13.1</b> Reading on functions from RDS by Hadley Wickham</a></li>
<li class="chapter" data-level="13.2" data-path="functions.html"><a href="functions.html#tutorial"><i class="fa fa-check"></i><b>13.2</b> Tutorial</a></li>
</ul></li>
<li class="chapter" data-level="14" data-path="climate-trend-analysis.html"><a href="climate-trend-analysis.html"><i class="fa fa-check"></i><b>14</b> Climate trend analysis</a>
<ul>
<li class="chapter" data-level="14.1" data-path="climate-trend-analysis.html"><a href="climate-trend-analysis.html#summary-questions-and-deliverable"><i class="fa fa-check"></i><b>14.1</b> Summary questions and deliverable</a></li>
<li class="chapter" data-level="14.2" data-path="climate-trend-analysis.html"><a href="climate-trend-analysis.html#new-packages"><i class="fa fa-check"></i><b>14.2</b> New packages</a></li>
<li class="chapter" data-level="14.3" data-path="climate-trend-analysis.html"><a href="climate-trend-analysis.html#data-download-exploration-and-cleaning"><i class="fa fa-check"></i><b>14.3</b> Data download, exploration and cleaning</a></li>
<li class="chapter" data-level="14.4" data-path="climate-trend-analysis.html"><a href="climate-trend-analysis.html#computing-annual-values"><i class="fa fa-check"></i><b>14.4</b> Computing annual values</a></li>
<li class="chapter" data-level="14.5" data-path="climate-trend-analysis.html"><a href="climate-trend-analysis.html#exploratory-data-analysis-eda-of-annual-values"><i class="fa fa-check"></i><b>14.5</b> Exploratory data analysis (EDA) of annual values</a></li>
<li class="chapter" data-level="14.6" data-path="climate-trend-analysis.html"><a href="climate-trend-analysis.html#trend-analysis-and-creating-table-1"><i class="fa fa-check"></i><b>14.6</b> Trend analysis and creating Table 1</a></li>
<li class="chapter" data-level="14.7" data-path="climate-trend-analysis.html"><a href="climate-trend-analysis.html#see-summary-section-at-top-for-questions-to-answer-and-deliverable."><i class="fa fa-check"></i><b>14.7</b> See summary section at top for questions to answer and deliverable.</a></li>
</ul></li>
<li class="chapter" data-level="15" data-path="for-loops.html"><a href="for-loops.html"><i class="fa fa-check"></i><b>15</b> For loops</a>
<ul>
<li class="chapter" data-level="15.1" data-path="for-loops.html"><a href="for-loops.html#libraries"><i class="fa fa-check"></i><b>15.1</b> Libraries</a></li>
<li class="chapter" data-level="15.2" data-path="for-loops.html"><a href="for-loops.html#defining-parameters"><i class="fa fa-check"></i><b>15.2</b> Defining parameters</a></li>
<li class="chapter" data-level="15.3" data-path="for-loops.html"><a href="for-loops.html#writing-the-for-loop"><i class="fa fa-check"></i><b>15.3</b> Writing the for loop</a></li>
<li class="chapter" data-level="15.4" data-path="for-loops.html"><a href="for-loops.html#adding-second-for"><i class="fa fa-check"></i><b>15.4</b> Adding second for</a></li>
<li class="chapter" data-level="15.5" data-path="for-loops.html"><a href="for-loops.html#removing-the-tmp-file"><i class="fa fa-check"></i><b>15.5</b> Removing the tmp file</a></li>
</ul></li>
<li class="chapter" data-level="16" data-path="downloading-dems-and-delineating-watersheds-5-pts.html"><a href="downloading-dems-and-delineating-watersheds-5-pts.html"><i class="fa fa-check"></i><b>16</b> Downloading DEMs and delineating watersheds (5 pts)</a>
<ul>
<li class="chapter" data-level="16.1" data-path="downloading-dems-and-delineating-watersheds-5-pts.html"><a href="downloading-dems-and-delineating-watersheds-5-pts.html#repo-here"><i class="fa fa-check"></i><b>16.1</b> Repo here</a></li>
<li class="chapter" data-level="16.2" data-path="downloading-dems-and-delineating-watersheds-5-pts.html"><a href="downloading-dems-and-delineating-watersheds-5-pts.html#streamstats"><i class="fa fa-check"></i><b>16.2</b> StreamStats</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Watershed Analysis: ENSC 445/LRES 545</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="downloading-dems-and-delineating-watersheds-5-pts" class="section level1 hasAnchor" number="16">
<h1><span class="header-section-number">Chapter 16</span> Downloading DEMs and delineating watersheds (5 pts)<a href="downloading-dems-and-delineating-watersheds-5-pts.html#downloading-dems-and-delineating-watersheds-5-pts" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>In this tutorial shows you how to download a DEM and delineate a watershed. Your deliverable for this lab is to repeat this workflow for a USGS gauge of your choosing (i.e., not the one in this tutorial) and submit a map with a figure caption noting the gauge number, location, and watershed area in the caption. On the map show a hillshade, the streams, and the gauge.</p>
<div id="repo-here" class="section level2 hasAnchor" number="16.1">
<h2><span class="header-section-number">16.1</span> <a href="https://github.com/tpcovino/21_dem_download_delineation.git" target="_blank">Repo here</a><a href="downloading-dems-and-delineating-watersheds-5-pts.html#repo-here" class="anchor-section" aria-label="Anchor link to header"></a></h2>
</div>
<div id="streamstats" class="section level2 hasAnchor" number="16.2">
<h2><span class="header-section-number">16.2</span> StreamStats<a href="downloading-dems-and-delineating-watersheds-5-pts.html#streamstats" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>There are lots of ways we can delineate watersheds. A particularly easy one is to use the Stream Stats package. Stream Stats is a USGS webpage where you can delineate to a point on a stream. It doesn’t work (hasn’t been developed) in every state (e.g., Wyoming). So it is good to know how to delineate with other packages (e.g., Whitebox).</p>
<p>Let’s first do a watershed delineation using StreamStats. <a href="https://streamstats.usgs.gov/ss/">Here</a> is the link to the StreamStats GUI.</p>
<div class="sourceCode" id="cb172"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb172-1"><a href="downloading-dems-and-delineating-watersheds-5-pts.html#cb172-1" tabindex="-1"></a>knitr<span class="sc">::</span>opts_chunk<span class="sc">$</span><span class="fu">set</span>(<span class="at">echo =</span> <span class="cn">TRUE</span>, <span class="at">include =</span> <span class="cn">TRUE</span>, <span class="at">message =</span> <span class="cn">FALSE</span>, <span class="at">warning =</span> <span class="cn">FALSE</span>)</span>
<span id="cb172-2"><a href="downloading-dems-and-delineating-watersheds-5-pts.html#cb172-2" tabindex="-1"></a></span>
<span id="cb172-3"><a href="downloading-dems-and-delineating-watersheds-5-pts.html#cb172-3" tabindex="-1"></a>devtools<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;https://github.com/giswqs/whiteboxR&quot;</span>)</span>
<span id="cb172-4"><a href="downloading-dems-and-delineating-watersheds-5-pts.html#cb172-4" tabindex="-1"></a></span>
<span id="cb172-5"><a href="downloading-dems-and-delineating-watersheds-5-pts.html#cb172-5" tabindex="-1"></a><span class="fu">library</span>(terra)</span>
<span id="cb172-6"><a href="downloading-dems-and-delineating-watersheds-5-pts.html#cb172-6" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb172-7"><a href="downloading-dems-and-delineating-watersheds-5-pts.html#cb172-7" tabindex="-1"></a><span class="fu">library</span>(dataRetrieval)</span>
<span id="cb172-8"><a href="downloading-dems-and-delineating-watersheds-5-pts.html#cb172-8" tabindex="-1"></a><span class="fu">library</span>(whitebox)</span>
<span id="cb172-9"><a href="downloading-dems-and-delineating-watersheds-5-pts.html#cb172-9" tabindex="-1"></a>whitebox<span class="sc">::</span><span class="fu">wbt_init</span>()</span>
<span id="cb172-10"><a href="downloading-dems-and-delineating-watersheds-5-pts.html#cb172-10" tabindex="-1"></a><span class="fu">library</span>(leaflet)</span>
<span id="cb172-11"><a href="downloading-dems-and-delineating-watersheds-5-pts.html#cb172-11" tabindex="-1"></a><span class="fu">library</span>(sf)</span>
<span id="cb172-12"><a href="downloading-dems-and-delineating-watersheds-5-pts.html#cb172-12" tabindex="-1"></a><span class="fu">library</span>(viridis)</span>
<span id="cb172-13"><a href="downloading-dems-and-delineating-watersheds-5-pts.html#cb172-13" tabindex="-1"></a><span class="fu">library</span>(terrainr)</span>
<span id="cb172-14"><a href="downloading-dems-and-delineating-watersheds-5-pts.html#cb172-14" tabindex="-1"></a><span class="fu">library</span>(tmap)</span>
<span id="cb172-15"><a href="downloading-dems-and-delineating-watersheds-5-pts.html#cb172-15" tabindex="-1"></a><span class="fu">library</span>(elevatr)</span>
<span id="cb172-16"><a href="downloading-dems-and-delineating-watersheds-5-pts.html#cb172-16" tabindex="-1"></a><span class="fu">library</span>(ggnewscale)</span>
<span id="cb172-17"><a href="downloading-dems-and-delineating-watersheds-5-pts.html#cb172-17" tabindex="-1"></a><span class="fu">library</span>(tidyterra)</span>
<span id="cb172-18"><a href="downloading-dems-and-delineating-watersheds-5-pts.html#cb172-18" tabindex="-1"></a><span class="fu">library</span>(stars)</span></code></pre></div>
<p>The gauge we will delineate to today is USGS 06047500 Bozeman Creek near Bozeman MT</p>
<div class="sourceCode" id="cb173"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb173-1"><a href="downloading-dems-and-delineating-watersheds-5-pts.html#cb173-1" tabindex="-1"></a>gage_info <span class="ot">&lt;-</span> <span class="fu">readNWISsite</span>(<span class="at">site =</span> <span class="st">&quot;06047500&quot;</span>)</span>
<span id="cb173-2"><a href="downloading-dems-and-delineating-watersheds-5-pts.html#cb173-2" tabindex="-1"></a></span>
<span id="cb173-3"><a href="downloading-dems-and-delineating-watersheds-5-pts.html#cb173-3" tabindex="-1"></a>xlocation <span class="ot">&lt;-</span> gage_info<span class="sc">$</span>dec_long_va</span>
<span id="cb173-4"><a href="downloading-dems-and-delineating-watersheds-5-pts.html#cb173-4" tabindex="-1"></a>ylocation <span class="ot">&lt;-</span> gage_info<span class="sc">$</span>dec_lat_va</span></code></pre></div>
<p>Now we can use the shapefile we just got from StreamStats to download a DEM. We will start by writing the shapefile. Next, we will load the shapefile. And then use that shapefile to download DEMs using terrainr.</p>
<div class="sourceCode" id="cb174"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb174-1"><a href="downloading-dems-and-delineating-watersheds-5-pts.html#cb174-1" tabindex="-1"></a><span class="co"># Read in the shape file using library(sf)</span></span>
<span id="cb174-2"><a href="downloading-dems-and-delineating-watersheds-5-pts.html#cb174-2" tabindex="-1"></a></span>
<span id="cb174-3"><a href="downloading-dems-and-delineating-watersheds-5-pts.html#cb174-3" tabindex="-1"></a>boundary <span class="ot">&lt;-</span> <span class="fu">st_read</span>(<span class="st">&quot;stream_stat/layers/globalwatershed.shp&quot;</span>) </span>
<span id="cb174-4"><a href="downloading-dems-and-delineating-watersheds-5-pts.html#cb174-4" tabindex="-1"></a></span>
<span id="cb174-5"><a href="downloading-dems-and-delineating-watersheds-5-pts.html#cb174-5" tabindex="-1"></a><span class="co"># Look at the boundary using library(tmap)</span></span>
<span id="cb174-6"><a href="downloading-dems-and-delineating-watersheds-5-pts.html#cb174-6" tabindex="-1"></a></span>
<span id="cb174-7"><a href="downloading-dems-and-delineating-watersheds-5-pts.html#cb174-7" tabindex="-1"></a><span class="fu">tm_shape</span>(boundary) <span class="sc">+</span></span>
<span id="cb174-8"><a href="downloading-dems-and-delineating-watersheds-5-pts.html#cb174-8" tabindex="-1"></a>  <span class="fu">tm_polygons</span>()</span></code></pre></div>
<p><img src="bookdown.Rprog_files/figure-html/unnamed-chunk-163-1.png" width="672" /></p>
<p>Download USGS DEM with terrainr.</p>
<div class="sourceCode" id="cb175"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb175-1"><a href="downloading-dems-and-delineating-watersheds-5-pts.html#cb175-1" tabindex="-1"></a><span class="co"># We could put the coordinates of the gage in and download. We already have the shapefile so we will use that instead. But the commented out code below would do it. </span></span>
<span id="cb175-2"><a href="downloading-dems-and-delineating-watersheds-5-pts.html#cb175-2" tabindex="-1"></a><span class="co"># location_of_interest &lt;- data.frame(</span></span>
<span id="cb175-3"><a href="downloading-dems-and-delineating-watersheds-5-pts.html#cb175-3" tabindex="-1"></a><span class="co">#   x = xlocation,</span></span>
<span id="cb175-4"><a href="downloading-dems-and-delineating-watersheds-5-pts.html#cb175-4" tabindex="-1"></a><span class="co">#   y = ylocation</span></span>
<span id="cb175-5"><a href="downloading-dems-and-delineating-watersheds-5-pts.html#cb175-5" tabindex="-1"></a><span class="co"># )</span></span>
<span id="cb175-6"><a href="downloading-dems-and-delineating-watersheds-5-pts.html#cb175-6" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb175-7"><a href="downloading-dems-and-delineating-watersheds-5-pts.html#cb175-7" tabindex="-1"></a><span class="co"># location_of_interest &lt;- st_as_sf(</span></span>
<span id="cb175-8"><a href="downloading-dems-and-delineating-watersheds-5-pts.html#cb175-8" tabindex="-1"></a><span class="co">#   location_of_interest, </span></span>
<span id="cb175-9"><a href="downloading-dems-and-delineating-watersheds-5-pts.html#cb175-9" tabindex="-1"></a><span class="co">#   coords = c(&quot;x&quot;, &quot;y&quot;), </span></span>
<span id="cb175-10"><a href="downloading-dems-and-delineating-watersheds-5-pts.html#cb175-10" tabindex="-1"></a><span class="co">#   crs = 4326</span></span>
<span id="cb175-11"><a href="downloading-dems-and-delineating-watersheds-5-pts.html#cb175-11" tabindex="-1"></a><span class="co"># )</span></span>
<span id="cb175-12"><a href="downloading-dems-and-delineating-watersheds-5-pts.html#cb175-12" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb175-13"><a href="downloading-dems-and-delineating-watersheds-5-pts.html#cb175-13" tabindex="-1"></a><span class="co"># box_of_interest &lt;- set_bbox_side_length(location_of_interest, 20000)</span></span>
<span id="cb175-14"><a href="downloading-dems-and-delineating-watersheds-5-pts.html#cb175-14" tabindex="-1"></a></span>
<span id="cb175-15"><a href="downloading-dems-and-delineating-watersheds-5-pts.html#cb175-15" tabindex="-1"></a>output_tiles <span class="ot">&lt;-</span> <span class="fu">get_tiles</span>(boundary,</span>
<span id="cb175-16"><a href="downloading-dems-and-delineating-watersheds-5-pts.html#cb175-16" tabindex="-1"></a>                          <span class="at">services =</span> <span class="fu">c</span>(<span class="st">&quot;elevation&quot;</span>),</span>
<span id="cb175-17"><a href="downloading-dems-and-delineating-watersheds-5-pts.html#cb175-17" tabindex="-1"></a>                          <span class="at">resolution =</span> <span class="dv">10</span> <span class="co"># pixel side length in meters</span></span>
<span id="cb175-18"><a href="downloading-dems-and-delineating-watersheds-5-pts.html#cb175-18" tabindex="-1"></a>                          )</span>
<span id="cb175-19"><a href="downloading-dems-and-delineating-watersheds-5-pts.html#cb175-19" tabindex="-1"></a></span>
<span id="cb175-20"><a href="downloading-dems-and-delineating-watersheds-5-pts.html#cb175-20" tabindex="-1"></a>output_tiles <span class="ot">&lt;-</span> <span class="fu">rast</span>(output_tiles[[<span class="st">&quot;elevation&quot;</span>]])</span>
<span id="cb175-21"><a href="downloading-dems-and-delineating-watersheds-5-pts.html#cb175-21" tabindex="-1"></a></span>
<span id="cb175-22"><a href="downloading-dems-and-delineating-watersheds-5-pts.html#cb175-22" tabindex="-1"></a><span class="fu">writeRaster</span>(output_tiles, <span class="st">&quot;dem/output_tiles.tif&quot;</span>, <span class="at">overwrite =</span> <span class="cn">TRUE</span>)</span>
<span id="cb175-23"><a href="downloading-dems-and-delineating-watersheds-5-pts.html#cb175-23" tabindex="-1"></a></span>
<span id="cb175-24"><a href="downloading-dems-and-delineating-watersheds-5-pts.html#cb175-24" tabindex="-1"></a><span class="fu">tm_shape</span>(output_tiles) <span class="sc">+</span></span>
<span id="cb175-25"><a href="downloading-dems-and-delineating-watersheds-5-pts.html#cb175-25" tabindex="-1"></a>  <span class="fu">tm_raster</span>(<span class="at">style =</span> <span class="st">&quot;cont&quot;</span>, <span class="at">palette =</span> <span class="st">&quot;-viridis&quot;</span>, <span class="at">legend.show =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<p><img src="bookdown.Rprog_files/figure-html/unnamed-chunk-164-1.png" width="672" /></p>
<p>Now we can run some Whitebox algorithms like fill sinks, flow accumulation, flow direction, and stream extraction.</p>
<p>We always start hydro-analysis with filling/breaching sinks.</p>
<div class="sourceCode" id="cb176"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb176-1"><a href="downloading-dems-and-delineating-watersheds-5-pts.html#cb176-1" tabindex="-1"></a><span class="fu">wbt_breach_depressions_least_cost</span>(</span>
<span id="cb176-2"><a href="downloading-dems-and-delineating-watersheds-5-pts.html#cb176-2" tabindex="-1"></a>  <span class="at">dem =</span> <span class="st">&quot;dem/output_tiles.tif&quot;</span>,</span>
<span id="cb176-3"><a href="downloading-dems-and-delineating-watersheds-5-pts.html#cb176-3" tabindex="-1"></a>  <span class="at">output =</span> <span class="st">&quot;dem/bzn_crk_breached.tif&quot;</span>,</span>
<span id="cb176-4"><a href="downloading-dems-and-delineating-watersheds-5-pts.html#cb176-4" tabindex="-1"></a>  <span class="at">dist =</span> <span class="dv">10</span>,</span>
<span id="cb176-5"><a href="downloading-dems-and-delineating-watersheds-5-pts.html#cb176-5" tabindex="-1"></a>  <span class="at">fill =</span> <span class="cn">TRUE</span>)</span>
<span id="cb176-6"><a href="downloading-dems-and-delineating-watersheds-5-pts.html#cb176-6" tabindex="-1"></a></span>
<span id="cb176-7"><a href="downloading-dems-and-delineating-watersheds-5-pts.html#cb176-7" tabindex="-1"></a><span class="fu">wbt_fill_depressions_wang_and_liu</span>(</span>
<span id="cb176-8"><a href="downloading-dems-and-delineating-watersheds-5-pts.html#cb176-8" tabindex="-1"></a>  <span class="at">dem =</span> <span class="st">&quot;dem/bzn_crk_breached.tif&quot;</span>,</span>
<span id="cb176-9"><a href="downloading-dems-and-delineating-watersheds-5-pts.html#cb176-9" tabindex="-1"></a>  <span class="at">output =</span> <span class="st">&quot;dem/bzn_filled_breached.tif&quot;</span></span>
<span id="cb176-10"><a href="downloading-dems-and-delineating-watersheds-5-pts.html#cb176-10" tabindex="-1"></a>)</span></code></pre></div>
<p>Next, we create flow accumulation and pointer rasters.</p>
<div class="sourceCode" id="cb177"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb177-1"><a href="downloading-dems-and-delineating-watersheds-5-pts.html#cb177-1" tabindex="-1"></a><span class="fu">wbt_d8_flow_accumulation</span>(<span class="at">input =</span> <span class="st">&quot;dem/bzn_filled_breached.tif&quot;</span>,</span>
<span id="cb177-2"><a href="downloading-dems-and-delineating-watersheds-5-pts.html#cb177-2" tabindex="-1"></a>                         <span class="at">output =</span> <span class="st">&quot;dem/D8FA.tif&quot;</span>)</span>
<span id="cb177-3"><a href="downloading-dems-and-delineating-watersheds-5-pts.html#cb177-3" tabindex="-1"></a></span>
<span id="cb177-4"><a href="downloading-dems-and-delineating-watersheds-5-pts.html#cb177-4" tabindex="-1"></a><span class="fu">wbt_d8_pointer</span>(<span class="at">dem =</span> <span class="st">&quot;dem/bzn_filled_breached.tif&quot;</span>,</span>
<span id="cb177-5"><a href="downloading-dems-and-delineating-watersheds-5-pts.html#cb177-5" tabindex="-1"></a>               <span class="at">output =</span> <span class="st">&quot;dem/D8pointer.tif&quot;</span>)</span></code></pre></div>
<p>Now, we set a pour point and make it a shape file.</p>
<div class="sourceCode" id="cb178"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb178-1"><a href="downloading-dems-and-delineating-watersheds-5-pts.html#cb178-1" tabindex="-1"></a>ppoints <span class="ot">&lt;-</span> <span class="fu">tribble</span>(</span>
<span id="cb178-2"><a href="downloading-dems-and-delineating-watersheds-5-pts.html#cb178-2" tabindex="-1"></a>          <span class="sc">~</span>Lon, <span class="sc">~</span>Lat,</span>
<span id="cb178-3"><a href="downloading-dems-and-delineating-watersheds-5-pts.html#cb178-3" tabindex="-1"></a>          xlocation, ylocation</span>
<span id="cb178-4"><a href="downloading-dems-and-delineating-watersheds-5-pts.html#cb178-4" tabindex="-1"></a>          )</span>
<span id="cb178-5"><a href="downloading-dems-and-delineating-watersheds-5-pts.html#cb178-5" tabindex="-1"></a></span>
<span id="cb178-6"><a href="downloading-dems-and-delineating-watersheds-5-pts.html#cb178-6" tabindex="-1"></a>ppointsSP <span class="ot">&lt;-</span> <span class="fu">st_as_sf</span>(ppoints, <span class="at">coords =</span> <span class="fu">c</span>(<span class="st">&quot;Lon&quot;</span>, <span class="st">&quot;Lat&quot;</span>), <span class="at">crs =</span> <span class="dv">4326</span>)</span>
<span id="cb178-7"><a href="downloading-dems-and-delineating-watersheds-5-pts.html#cb178-7" tabindex="-1"></a></span>
<span id="cb178-8"><a href="downloading-dems-and-delineating-watersheds-5-pts.html#cb178-8" tabindex="-1"></a><span class="fu">write_sf</span>(ppointsSP, <span class="st">&quot;dem/pourpoints.shp&quot;</span>, <span class="at">overwrite =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<p>Now we can extract the streams like we did last week.</p>
<p>You can play with the threshold to see how it affects the drainage density. This threshold requires some knowledge of the watershed, climate, etc. We will also plot the point and the streams to make sure the point of the gauge falls on the stream as modeled by whitebox.</p>
<div class="sourceCode" id="cb179"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb179-1"><a href="downloading-dems-and-delineating-watersheds-5-pts.html#cb179-1" tabindex="-1"></a><span class="fu">wbt_extract_streams</span>(<span class="at">flow_accum =</span> <span class="st">&quot;dem/D8FA.tif&quot;</span>,</span>
<span id="cb179-2"><a href="downloading-dems-and-delineating-watersheds-5-pts.html#cb179-2" tabindex="-1"></a>                    <span class="at">output =</span> <span class="st">&quot;dem/raster_streams.tif&quot;</span>,</span>
<span id="cb179-3"><a href="downloading-dems-and-delineating-watersheds-5-pts.html#cb179-3" tabindex="-1"></a>                    <span class="at">threshold =</span> <span class="dv">8000</span>)</span>
<span id="cb179-4"><a href="downloading-dems-and-delineating-watersheds-5-pts.html#cb179-4" tabindex="-1"></a></span>
<span id="cb179-5"><a href="downloading-dems-and-delineating-watersheds-5-pts.html#cb179-5" tabindex="-1"></a><span class="fu">wbt_jenson_snap_pour_points</span>(<span class="at">pour_pts =</span> <span class="st">&quot;dem/pourpoints.shp&quot;</span>,</span>
<span id="cb179-6"><a href="downloading-dems-and-delineating-watersheds-5-pts.html#cb179-6" tabindex="-1"></a>                            <span class="at">streams =</span> <span class="st">&quot;dem/raster_streams.tif&quot;</span>,</span>
<span id="cb179-7"><a href="downloading-dems-and-delineating-watersheds-5-pts.html#cb179-7" tabindex="-1"></a>                            <span class="at">output =</span> <span class="st">&quot;dem/snappedpp.shp&quot;</span>,</span>
<span id="cb179-8"><a href="downloading-dems-and-delineating-watersheds-5-pts.html#cb179-8" tabindex="-1"></a>                            <span class="at">snap_dist =</span> <span class="fl">0.0010</span>) <span class="co">#careful with this! Know the units of your data</span></span>
<span id="cb179-9"><a href="downloading-dems-and-delineating-watersheds-5-pts.html#cb179-9" tabindex="-1"></a><span class="fu">tmap_mode</span>(<span class="st">&quot;view&quot;</span>)</span>
<span id="cb179-10"><a href="downloading-dems-and-delineating-watersheds-5-pts.html#cb179-10" tabindex="-1"></a></span>
<span id="cb179-11"><a href="downloading-dems-and-delineating-watersheds-5-pts.html#cb179-11" tabindex="-1"></a>pp <span class="ot">&lt;-</span> <span class="fu">read_sf</span>(<span class="st">&quot;dem/snappedpp.shp&quot;</span>)</span>
<span id="cb179-12"><a href="downloading-dems-and-delineating-watersheds-5-pts.html#cb179-12" tabindex="-1"></a>streams <span class="ot">&lt;-</span> <span class="fu">rast</span>(<span class="st">&quot;dem/raster_streams.tif&quot;</span>)</span>
<span id="cb179-13"><a href="downloading-dems-and-delineating-watersheds-5-pts.html#cb179-13" tabindex="-1"></a></span>
<span id="cb179-14"><a href="downloading-dems-and-delineating-watersheds-5-pts.html#cb179-14" tabindex="-1"></a><span class="fu">tm_shape</span>(streams)<span class="sc">+</span></span>
<span id="cb179-15"><a href="downloading-dems-and-delineating-watersheds-5-pts.html#cb179-15" tabindex="-1"></a>  <span class="fu">tm_raster</span>(<span class="at">legend.show =</span> <span class="cn">TRUE</span>, <span class="at">palette =</span> <span class="st">&quot;darkblue&quot;</span>)<span class="sc">+</span></span>
<span id="cb179-16"><a href="downloading-dems-and-delineating-watersheds-5-pts.html#cb179-16" tabindex="-1"></a><span class="fu">tm_shape</span>(pp)<span class="sc">+</span></span>
<span id="cb179-17"><a href="downloading-dems-and-delineating-watersheds-5-pts.html#cb179-17" tabindex="-1"></a>  <span class="fu">tm_dots</span>(<span class="at">col =</span> <span class="st">&quot;red&quot;</span>)</span></code></pre></div>
<p>Now, we can delineate the watershed. This is the whitebox watershed delineation tool. We already did this with the stream stats GUI, but this is good to know how to do as well.</p>
<div class="sourceCode" id="cb180"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb180-1"><a href="downloading-dems-and-delineating-watersheds-5-pts.html#cb180-1" tabindex="-1"></a><span class="co"># Delineate the watershed. </span></span>
<span id="cb180-2"><a href="downloading-dems-and-delineating-watersheds-5-pts.html#cb180-2" tabindex="-1"></a><span class="fu">wbt_watershed</span>(<span class="at">d8_pntr =</span> <span class="st">&quot;dem/D8pointer.tif&quot;</span>,</span>
<span id="cb180-3"><a href="downloading-dems-and-delineating-watersheds-5-pts.html#cb180-3" tabindex="-1"></a>              <span class="at">pour_pts =</span> <span class="st">&quot;dem/snappedpp.shp&quot;</span>,</span>
<span id="cb180-4"><a href="downloading-dems-and-delineating-watersheds-5-pts.html#cb180-4" tabindex="-1"></a>              <span class="at">output =</span> <span class="st">&quot;dem/bzn_crk_watershed.tif&quot;</span>)</span>
<span id="cb180-5"><a href="downloading-dems-and-delineating-watersheds-5-pts.html#cb180-5" tabindex="-1"></a></span>
<span id="cb180-6"><a href="downloading-dems-and-delineating-watersheds-5-pts.html#cb180-6" tabindex="-1"></a></span>
<span id="cb180-7"><a href="downloading-dems-and-delineating-watersheds-5-pts.html#cb180-7" tabindex="-1"></a><span class="co"># Write the watershed raster. </span></span>
<span id="cb180-8"><a href="downloading-dems-and-delineating-watersheds-5-pts.html#cb180-8" tabindex="-1"></a>ws <span class="ot">&lt;-</span> <span class="fu">rast</span>(<span class="st">&quot;dem/bzn_crk_watershed.tif&quot;</span>)</span>
<span id="cb180-9"><a href="downloading-dems-and-delineating-watersheds-5-pts.html#cb180-9" tabindex="-1"></a></span>
<span id="cb180-10"><a href="downloading-dems-and-delineating-watersheds-5-pts.html#cb180-10" tabindex="-1"></a><span class="co"># View the watershed raster. </span></span>
<span id="cb180-11"><a href="downloading-dems-and-delineating-watersheds-5-pts.html#cb180-11" tabindex="-1"></a><span class="fu">tm_shape</span>(ws) <span class="sc">+</span></span>
<span id="cb180-12"><a href="downloading-dems-and-delineating-watersheds-5-pts.html#cb180-12" tabindex="-1"></a>  <span class="fu">tm_raster</span>(<span class="at">style =</span> <span class="st">&quot;cont&quot;</span>, <span class="at">palette =</span> <span class="st">&quot;-viridis&quot;</span>, <span class="at">legend.show =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<p>We have now delineated the watershed. We can now make a hillshade for visualization.</p>
<div class="sourceCode" id="cb181"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb181-1"><a href="downloading-dems-and-delineating-watersheds-5-pts.html#cb181-1" tabindex="-1"></a><span class="fu">wbt_hillshade</span>(<span class="at">dem =</span> <span class="st">&quot;dem/output_tiles.tif&quot;</span>,</span>
<span id="cb181-2"><a href="downloading-dems-and-delineating-watersheds-5-pts.html#cb181-2" tabindex="-1"></a>              <span class="at">output =</span> <span class="st">&quot;dem/bzn_creek_hillshade.tif&quot;</span>,</span>
<span id="cb181-3"><a href="downloading-dems-and-delineating-watersheds-5-pts.html#cb181-3" tabindex="-1"></a>              <span class="at">azimuth =</span> <span class="dv">315</span>)</span>
<span id="cb181-4"><a href="downloading-dems-and-delineating-watersheds-5-pts.html#cb181-4" tabindex="-1"></a></span>
<span id="cb181-5"><a href="downloading-dems-and-delineating-watersheds-5-pts.html#cb181-5" tabindex="-1"></a>hillshade <span class="ot">&lt;-</span> <span class="fu">rast</span>(<span class="st">&quot;dem/bzn_creek_hillshade.tif&quot;</span>)</span>
<span id="cb181-6"><a href="downloading-dems-and-delineating-watersheds-5-pts.html#cb181-6" tabindex="-1"></a></span>
<span id="cb181-7"><a href="downloading-dems-and-delineating-watersheds-5-pts.html#cb181-7" tabindex="-1"></a><span class="fu">tm_shape</span>(hillshade) <span class="sc">+</span></span>
<span id="cb181-8"><a href="downloading-dems-and-delineating-watersheds-5-pts.html#cb181-8" tabindex="-1"></a>  <span class="fu">tm_raster</span>(<span class="at">style =</span> <span class="st">&quot;cont&quot;</span>, <span class="at">palette =</span> <span class="st">&quot;-Greys&quot;</span>, <span class="at">legend.show =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
<p>But let’s clip that hillshade to the delineated watershed.</p>
<div class="sourceCode" id="cb182"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb182-1"><a href="downloading-dems-and-delineating-watersheds-5-pts.html#cb182-1" tabindex="-1"></a>clip_dem <span class="ot">&lt;-</span> ws <span class="sc">*</span> output_tiles</span>
<span id="cb182-2"><a href="downloading-dems-and-delineating-watersheds-5-pts.html#cb182-2" tabindex="-1"></a>clip_dem_df <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(clip_dem, <span class="at">xy =</span> <span class="cn">TRUE</span>)</span>
<span id="cb182-3"><a href="downloading-dems-and-delineating-watersheds-5-pts.html#cb182-3" tabindex="-1"></a><span class="fu">colnames</span>(clip_dem_df)[<span class="dv">3</span>] <span class="ot">&lt;-</span> <span class="st">&quot;elevation&quot;</span></span>
<span id="cb182-4"><a href="downloading-dems-and-delineating-watersheds-5-pts.html#cb182-4" tabindex="-1"></a></span>
<span id="cb182-5"><a href="downloading-dems-and-delineating-watersheds-5-pts.html#cb182-5" tabindex="-1"></a><span class="co"># remove rows of data frame with one or more NA&#39;s,using complete.cases</span></span>
<span id="cb182-6"><a href="downloading-dems-and-delineating-watersheds-5-pts.html#cb182-6" tabindex="-1"></a>clip_dem_df <span class="ot">&lt;-</span> clip_dem_df[<span class="fu">complete.cases</span>(clip_dem_df), ]</span>
<span id="cb182-7"><a href="downloading-dems-and-delineating-watersheds-5-pts.html#cb182-7" tabindex="-1"></a></span>
<span id="cb182-8"><a href="downloading-dems-and-delineating-watersheds-5-pts.html#cb182-8" tabindex="-1"></a><span class="co"># do same for hillshade</span></span>
<span id="cb182-9"><a href="downloading-dems-and-delineating-watersheds-5-pts.html#cb182-9" tabindex="-1"></a>clip_hillshade <span class="ot">&lt;-</span> ws <span class="sc">*</span> hillshade</span>
<span id="cb182-10"><a href="downloading-dems-and-delineating-watersheds-5-pts.html#cb182-10" tabindex="-1"></a>clip_hillshade_df <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(clip_hillshade, <span class="at">xy =</span> <span class="cn">TRUE</span>)</span>
<span id="cb182-11"><a href="downloading-dems-and-delineating-watersheds-5-pts.html#cb182-11" tabindex="-1"></a><span class="fu">colnames</span>(clip_hillshade_df)[<span class="dv">3</span>] <span class="ot">&lt;-</span> <span class="st">&quot;hillshade&quot;</span></span>
<span id="cb182-12"><a href="downloading-dems-and-delineating-watersheds-5-pts.html#cb182-12" tabindex="-1"></a>clip_hillshade_df <span class="ot">&lt;-</span> clip_hillshade_df[<span class="fu">complete.cases</span>(clip_hillshade_df), ]</span></code></pre></div>
<p>Make map with ggplot.</p>
<div class="sourceCode" id="cb183"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb183-1"><a href="downloading-dems-and-delineating-watersheds-5-pts.html#cb183-1" tabindex="-1"></a><span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb183-2"><a href="downloading-dems-and-delineating-watersheds-5-pts.html#cb183-2" tabindex="-1"></a>  <span class="fu">geom_raster</span>(<span class="at">data =</span> clip_dem_df, <span class="fu">aes</span>(<span class="at">x =</span> x, <span class="at">y =</span> y, <span class="at">fill =</span> elevation)) <span class="sc">+</span></span>
<span id="cb183-3"><a href="downloading-dems-and-delineating-watersheds-5-pts.html#cb183-3" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data =</span> boundary, <span class="at">fill =</span> <span class="cn">NA</span>, <span class="at">color =</span> <span class="st">&quot;white&quot;</span>) <span class="sc">+</span></span>
<span id="cb183-4"><a href="downloading-dems-and-delineating-watersheds-5-pts.html#cb183-4" tabindex="-1"></a>  <span class="fu">coord_sf</span>() <span class="sc">+</span></span>
<span id="cb183-5"><a href="downloading-dems-and-delineating-watersheds-5-pts.html#cb183-5" tabindex="-1"></a>  <span class="fu">scale_fill_viridis_c</span>() <span class="sc">+</span></span>
<span id="cb183-6"><a href="downloading-dems-and-delineating-watersheds-5-pts.html#cb183-6" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Bozeman Creek Watershed&quot;</span>, <span class="at">x =</span> <span class="st">&quot;Longitude&quot;</span>, <span class="at">y =</span> <span class="st">&quot;Latitude&quot;</span>, <span class="at">fill =</span> <span class="st">&quot;Elevation (meters)&quot;</span>)</span></code></pre></div>
<p><img src="bookdown.Rprog_files/figure-html/unnamed-chunk-172-1.png" width="672" /></p>
<p>Let’s add the pour point, hillshade, and streams to the figure.</p>
<div class="sourceCode" id="cb184"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb184-1"><a href="downloading-dems-and-delineating-watersheds-5-pts.html#cb184-1" tabindex="-1"></a><span class="co"># Make streams a data frame then shape. </span></span>
<span id="cb184-2"><a href="downloading-dems-and-delineating-watersheds-5-pts.html#cb184-2" tabindex="-1"></a>clip_streams <span class="ot">&lt;-</span> ws <span class="sc">*</span> streams</span>
<span id="cb184-3"><a href="downloading-dems-and-delineating-watersheds-5-pts.html#cb184-3" tabindex="-1"></a>clip_streams_df <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(clip_streams, <span class="at">xy =</span> <span class="cn">TRUE</span>)</span>
<span id="cb184-4"><a href="downloading-dems-and-delineating-watersheds-5-pts.html#cb184-4" tabindex="-1"></a><span class="fu">colnames</span>(clip_streams_df)[<span class="dv">3</span>] <span class="ot">&lt;-</span> <span class="st">&quot;elevation&quot;</span></span>
<span id="cb184-5"><a href="downloading-dems-and-delineating-watersheds-5-pts.html#cb184-5" tabindex="-1"></a>clip_streams_df <span class="ot">&lt;-</span> clip_streams_df[<span class="fu">complete.cases</span>(clip_streams_df), ]</span>
<span id="cb184-6"><a href="downloading-dems-and-delineating-watersheds-5-pts.html#cb184-6" tabindex="-1"></a><span class="fu">writeRaster</span>(clip_streams, <span class="st">&quot;dem/clip_streams.tif&quot;</span>, <span class="at">overwrite =</span> <span class="cn">TRUE</span>)</span>
<span id="cb184-7"><a href="downloading-dems-and-delineating-watersheds-5-pts.html#cb184-7" tabindex="-1"></a></span>
<span id="cb184-8"><a href="downloading-dems-and-delineating-watersheds-5-pts.html#cb184-8" tabindex="-1"></a><span class="fu">wbt_raster_streams_to_vector</span>(<span class="at">streams =</span> <span class="st">&quot;dem/clip_streams.tif&quot;</span>,</span>
<span id="cb184-9"><a href="downloading-dems-and-delineating-watersheds-5-pts.html#cb184-9" tabindex="-1"></a>                             <span class="at">d8_pntr =</span> <span class="st">&quot;dem/D8pointer.tif&quot;</span>,</span>
<span id="cb184-10"><a href="downloading-dems-and-delineating-watersheds-5-pts.html#cb184-10" tabindex="-1"></a>                             <span class="at">output =</span> <span class="st">&quot;dem/streams.shp&quot;</span>)</span>
<span id="cb184-11"><a href="downloading-dems-and-delineating-watersheds-5-pts.html#cb184-11" tabindex="-1"></a></span>
<span id="cb184-12"><a href="downloading-dems-and-delineating-watersheds-5-pts.html#cb184-12" tabindex="-1"></a>streams_shp <span class="ot">&lt;-</span> <span class="fu">st_read</span>(<span class="st">&quot;dem/streams.shp&quot;</span>)</span></code></pre></div>
<p>Make a map with ggplot, add streams and pour point.</p>
<div class="sourceCode" id="cb185"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb185-1"><a href="downloading-dems-and-delineating-watersheds-5-pts.html#cb185-1" tabindex="-1"></a><span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb185-2"><a href="downloading-dems-and-delineating-watersheds-5-pts.html#cb185-2" tabindex="-1"></a>  <span class="fu">geom_raster</span>(<span class="at">data =</span> clip_dem_df, <span class="fu">aes</span>(<span class="at">x =</span> x, <span class="at">y =</span> y, <span class="at">fill =</span> elevation)) <span class="sc">+</span></span>
<span id="cb185-3"><a href="downloading-dems-and-delineating-watersheds-5-pts.html#cb185-3" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data =</span> streams_shp, <span class="at">color =</span> <span class="st">&quot;blue&quot;</span>) <span class="sc">+</span></span>
<span id="cb185-4"><a href="downloading-dems-and-delineating-watersheds-5-pts.html#cb185-4" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">data =</span> ppoints, <span class="fu">aes</span>(<span class="at">x =</span> Lon, <span class="at">y =</span> Lat), <span class="at">color =</span> <span class="st">&quot;red&quot;</span>) <span class="sc">+</span> </span>
<span id="cb185-5"><a href="downloading-dems-and-delineating-watersheds-5-pts.html#cb185-5" tabindex="-1"></a>  <span class="fu">coord_sf</span>() <span class="sc">+</span></span>
<span id="cb185-6"><a href="downloading-dems-and-delineating-watersheds-5-pts.html#cb185-6" tabindex="-1"></a>  <span class="fu">scale_fill_viridis_c</span>() <span class="sc">+</span></span>
<span id="cb185-7"><a href="downloading-dems-and-delineating-watersheds-5-pts.html#cb185-7" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Bozeman Creek Watershed&quot;</span>, <span class="at">x =</span> <span class="st">&quot;Longitude&quot;</span>, <span class="at">y =</span> <span class="st">&quot;Latitude&quot;</span>, <span class="at">fill =</span> <span class="st">&quot;Elevation (meters)&quot;</span>)</span></code></pre></div>
<p><img src="bookdown.Rprog_files/figure-html/unnamed-chunk-174-1.png" width="672" /></p>
<p>Add hillshade.</p>
<div class="sourceCode" id="cb186"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb186-1"><a href="downloading-dems-and-delineating-watersheds-5-pts.html#cb186-1" tabindex="-1"></a><span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb186-2"><a href="downloading-dems-and-delineating-watersheds-5-pts.html#cb186-2" tabindex="-1"></a>  <span class="fu">geom_raster</span>(<span class="at">data =</span> clip_hillshade_df,</span>
<span id="cb186-3"><a href="downloading-dems-and-delineating-watersheds-5-pts.html#cb186-3" tabindex="-1"></a>              <span class="fu">aes</span>(<span class="at">x =</span> x, <span class="at">y =</span> y, <span class="at">fill =</span> hillshade),</span>
<span id="cb186-4"><a href="downloading-dems-and-delineating-watersheds-5-pts.html#cb186-4" tabindex="-1"></a>              <span class="at">show.legend =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb186-5"><a href="downloading-dems-and-delineating-watersheds-5-pts.html#cb186-5" tabindex="-1"></a>  <span class="fu">scale_fill_distiller</span>(<span class="at">palette =</span> <span class="st">&quot;Greys&quot;</span>) <span class="sc">+</span></span>
<span id="cb186-6"><a href="downloading-dems-and-delineating-watersheds-5-pts.html#cb186-6" tabindex="-1"></a>  <span class="fu">new_scale_fill</span>() <span class="sc">+</span></span>
<span id="cb186-7"><a href="downloading-dems-and-delineating-watersheds-5-pts.html#cb186-7" tabindex="-1"></a>  <span class="fu">geom_raster</span>(<span class="at">data =</span> clip_dem_df,</span>
<span id="cb186-8"><a href="downloading-dems-and-delineating-watersheds-5-pts.html#cb186-8" tabindex="-1"></a>              <span class="fu">aes</span>(<span class="at">x =</span> x, <span class="at">y =</span> y, <span class="at">fill =</span> elevation),</span>
<span id="cb186-9"><a href="downloading-dems-and-delineating-watersheds-5-pts.html#cb186-9" tabindex="-1"></a>              <span class="at">alpha =</span> .<span class="dv">7</span>) <span class="sc">+</span></span>
<span id="cb186-10"><a href="downloading-dems-and-delineating-watersheds-5-pts.html#cb186-10" tabindex="-1"></a>  <span class="fu">scale_fill_distiller</span>(<span class="at">palette =</span> <span class="st">&quot;GnBu&quot;</span>) <span class="sc">+</span></span>
<span id="cb186-11"><a href="downloading-dems-and-delineating-watersheds-5-pts.html#cb186-11" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data =</span> streams_shp, <span class="at">color =</span> <span class="st">&quot;blue&quot;</span>) <span class="sc">+</span></span>
<span id="cb186-12"><a href="downloading-dems-and-delineating-watersheds-5-pts.html#cb186-12" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">data =</span> ppoints, <span class="fu">aes</span>(<span class="at">x =</span> Lon, <span class="at">y =</span> Lat), <span class="at">color =</span> <span class="st">&quot;red&quot;</span>) <span class="sc">+</span></span>
<span id="cb186-13"><a href="downloading-dems-and-delineating-watersheds-5-pts.html#cb186-13" tabindex="-1"></a>  <span class="fu">guides</span>(<span class="at">fill =</span> <span class="fu">guide_colorsteps</span>(<span class="at">barwidth =</span> <span class="dv">20</span>,</span>
<span id="cb186-14"><a href="downloading-dems-and-delineating-watersheds-5-pts.html#cb186-14" tabindex="-1"></a>                                 <span class="at">barheight =</span> .<span class="dv">5</span>,</span>
<span id="cb186-15"><a href="downloading-dems-and-delineating-watersheds-5-pts.html#cb186-15" tabindex="-1"></a>                                 <span class="at">title.position =</span> <span class="st">&quot;right&quot;</span>)) <span class="sc">+</span></span>
<span id="cb186-16"><a href="downloading-dems-and-delineating-watersheds-5-pts.html#cb186-16" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">fill =</span> <span class="st">&quot;m&quot;</span>) <span class="sc">+</span></span>
<span id="cb186-17"><a href="downloading-dems-and-delineating-watersheds-5-pts.html#cb186-17" tabindex="-1"></a>  <span class="fu">coord_sf</span>() <span class="sc">+</span></span>
<span id="cb186-18"><a href="downloading-dems-and-delineating-watersheds-5-pts.html#cb186-18" tabindex="-1"></a>  <span class="fu">theme_void</span>() <span class="sc">+</span></span>
<span id="cb186-19"><a href="downloading-dems-and-delineating-watersheds-5-pts.html#cb186-19" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;bottom&quot;</span>)</span></code></pre></div>
<p><img src="bookdown.Rprog_files/figure-html/unnamed-chunk-175-1.png" width="672" /></p>
<p>Play with colors in. Here change to cold_humid color.</p>
<div class="sourceCode" id="cb187"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb187-1"><a href="downloading-dems-and-delineating-watersheds-5-pts.html#cb187-1" tabindex="-1"></a><span class="fu">library</span>(ggnewscale)</span>
<span id="cb187-2"><a href="downloading-dems-and-delineating-watersheds-5-pts.html#cb187-2" tabindex="-1"></a><span class="fu">library</span>(tidyterra)</span>
<span id="cb187-3"><a href="downloading-dems-and-delineating-watersheds-5-pts.html#cb187-3" tabindex="-1"></a></span>
<span id="cb187-4"><a href="downloading-dems-and-delineating-watersheds-5-pts.html#cb187-4" tabindex="-1"></a><span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb187-5"><a href="downloading-dems-and-delineating-watersheds-5-pts.html#cb187-5" tabindex="-1"></a>  <span class="fu">geom_raster</span>(<span class="at">data =</span> clip_hillshade_df,</span>
<span id="cb187-6"><a href="downloading-dems-and-delineating-watersheds-5-pts.html#cb187-6" tabindex="-1"></a>              <span class="fu">aes</span>(<span class="at">x =</span> x, <span class="at">y =</span> y, <span class="at">fill =</span> hillshade),</span>
<span id="cb187-7"><a href="downloading-dems-and-delineating-watersheds-5-pts.html#cb187-7" tabindex="-1"></a>              <span class="at">show.legend =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb187-8"><a href="downloading-dems-and-delineating-watersheds-5-pts.html#cb187-8" tabindex="-1"></a>  <span class="fu">scale_fill_distiller</span>(<span class="at">palette =</span> <span class="st">&quot;Greys&quot;</span>) <span class="sc">+</span></span>
<span id="cb187-9"><a href="downloading-dems-and-delineating-watersheds-5-pts.html#cb187-9" tabindex="-1"></a>  <span class="fu">new_scale_fill</span>() <span class="sc">+</span></span>
<span id="cb187-10"><a href="downloading-dems-and-delineating-watersheds-5-pts.html#cb187-10" tabindex="-1"></a>  <span class="fu">geom_raster</span>(<span class="at">data =</span> clip_dem_df,</span>
<span id="cb187-11"><a href="downloading-dems-and-delineating-watersheds-5-pts.html#cb187-11" tabindex="-1"></a>              <span class="fu">aes</span>(<span class="at">x =</span> x, <span class="at">y =</span> y, <span class="at">fill =</span> elevation),</span>
<span id="cb187-12"><a href="downloading-dems-and-delineating-watersheds-5-pts.html#cb187-12" tabindex="-1"></a>              <span class="at">alpha =</span> .<span class="dv">7</span>) <span class="sc">+</span></span>
<span id="cb187-13"><a href="downloading-dems-and-delineating-watersheds-5-pts.html#cb187-13" tabindex="-1"></a>  <span class="fu">scale_fill_cross_blended_c</span>(<span class="at">palette =</span> <span class="st">&quot;cold_humid&quot;</span>) <span class="sc">+</span></span>
<span id="cb187-14"><a href="downloading-dems-and-delineating-watersheds-5-pts.html#cb187-14" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data =</span> streams_shp, <span class="at">color =</span> <span class="st">&quot;blue&quot;</span>) <span class="sc">+</span></span>
<span id="cb187-15"><a href="downloading-dems-and-delineating-watersheds-5-pts.html#cb187-15" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">data =</span> ppoints, <span class="fu">aes</span>(<span class="at">x =</span> Lon, <span class="at">y =</span> Lat), <span class="at">color =</span> <span class="st">&quot;red&quot;</span>) <span class="sc">+</span></span>
<span id="cb187-16"><a href="downloading-dems-and-delineating-watersheds-5-pts.html#cb187-16" tabindex="-1"></a>  <span class="fu">guides</span>(<span class="at">fill =</span> <span class="fu">guide_colorsteps</span>(<span class="at">barwidth =</span> <span class="dv">20</span>,</span>
<span id="cb187-17"><a href="downloading-dems-and-delineating-watersheds-5-pts.html#cb187-17" tabindex="-1"></a>                                 <span class="at">barheight =</span> .<span class="dv">5</span>,</span>
<span id="cb187-18"><a href="downloading-dems-and-delineating-watersheds-5-pts.html#cb187-18" tabindex="-1"></a>                                 <span class="at">title.position =</span> <span class="st">&quot;right&quot;</span>)) <span class="sc">+</span></span>
<span id="cb187-19"><a href="downloading-dems-and-delineating-watersheds-5-pts.html#cb187-19" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">fill =</span> <span class="st">&quot;m&quot;</span>) <span class="sc">+</span></span>
<span id="cb187-20"><a href="downloading-dems-and-delineating-watersheds-5-pts.html#cb187-20" tabindex="-1"></a>  <span class="fu">coord_sf</span>() <span class="sc">+</span></span>
<span id="cb187-21"><a href="downloading-dems-and-delineating-watersheds-5-pts.html#cb187-21" tabindex="-1"></a>  <span class="fu">theme_void</span>() <span class="sc">+</span></span>
<span id="cb187-22"><a href="downloading-dems-and-delineating-watersheds-5-pts.html#cb187-22" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;bottom&quot;</span>)</span></code></pre></div>
<p><img src="bookdown.Rprog_files/figure-html/unnamed-chunk-176-1.png" width="672" /></p>
<p>Here change to viridis color.</p>
<div class="sourceCode" id="cb188"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb188-1"><a href="downloading-dems-and-delineating-watersheds-5-pts.html#cb188-1" tabindex="-1"></a><span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb188-2"><a href="downloading-dems-and-delineating-watersheds-5-pts.html#cb188-2" tabindex="-1"></a>  <span class="fu">geom_raster</span>(<span class="at">data =</span> clip_hillshade_df,</span>
<span id="cb188-3"><a href="downloading-dems-and-delineating-watersheds-5-pts.html#cb188-3" tabindex="-1"></a>              <span class="fu">aes</span>(<span class="at">x =</span> x, <span class="at">y =</span> y, <span class="at">fill =</span> hillshade),</span>
<span id="cb188-4"><a href="downloading-dems-and-delineating-watersheds-5-pts.html#cb188-4" tabindex="-1"></a>              <span class="at">show.legend =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb188-5"><a href="downloading-dems-and-delineating-watersheds-5-pts.html#cb188-5" tabindex="-1"></a>  <span class="fu">scale_fill_distiller</span>(<span class="at">palette =</span> <span class="st">&quot;Greys&quot;</span>) <span class="sc">+</span></span>
<span id="cb188-6"><a href="downloading-dems-and-delineating-watersheds-5-pts.html#cb188-6" tabindex="-1"></a>  <span class="fu">new_scale_fill</span>() <span class="sc">+</span></span>
<span id="cb188-7"><a href="downloading-dems-and-delineating-watersheds-5-pts.html#cb188-7" tabindex="-1"></a>  <span class="fu">geom_raster</span>(<span class="at">data =</span> clip_dem_df,</span>
<span id="cb188-8"><a href="downloading-dems-and-delineating-watersheds-5-pts.html#cb188-8" tabindex="-1"></a>              <span class="fu">aes</span>(<span class="at">x =</span> x, <span class="at">y =</span> y, <span class="at">fill =</span> elevation),</span>
<span id="cb188-9"><a href="downloading-dems-and-delineating-watersheds-5-pts.html#cb188-9" tabindex="-1"></a>              <span class="at">alpha =</span> .<span class="dv">7</span>) <span class="sc">+</span></span>
<span id="cb188-10"><a href="downloading-dems-and-delineating-watersheds-5-pts.html#cb188-10" tabindex="-1"></a>  <span class="fu">scale_fill_continuous</span>(<span class="at">type =</span> <span class="st">&quot;viridis&quot;</span>) <span class="sc">+</span></span>
<span id="cb188-11"><a href="downloading-dems-and-delineating-watersheds-5-pts.html#cb188-11" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data =</span> streams_shp, <span class="at">color =</span> <span class="st">&quot;blue&quot;</span>) <span class="sc">+</span></span>
<span id="cb188-12"><a href="downloading-dems-and-delineating-watersheds-5-pts.html#cb188-12" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">data =</span> ppoints, <span class="fu">aes</span>(<span class="at">x =</span> Lon, <span class="at">y =</span> Lat), <span class="at">color =</span> <span class="st">&quot;red&quot;</span>) <span class="sc">+</span></span>
<span id="cb188-13"><a href="downloading-dems-and-delineating-watersheds-5-pts.html#cb188-13" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">fill =</span> <span class="st">&quot;Elevation (m)&quot;</span>) <span class="sc">+</span></span>
<span id="cb188-14"><a href="downloading-dems-and-delineating-watersheds-5-pts.html#cb188-14" tabindex="-1"></a>  <span class="fu">coord_sf</span>() <span class="sc">+</span></span>
<span id="cb188-15"><a href="downloading-dems-and-delineating-watersheds-5-pts.html#cb188-15" tabindex="-1"></a>  <span class="fu">theme_void</span>() <span class="sc">+</span></span>
<span id="cb188-16"><a href="downloading-dems-and-delineating-watersheds-5-pts.html#cb188-16" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;bottom&quot;</span>)</span></code></pre></div>
<p><img src="bookdown.Rprog_files/figure-html/unnamed-chunk-177-1.png" width="672" /></p>
<p>You can also make this map with tmap.</p>
<div class="sourceCode" id="cb189"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb189-1"><a href="downloading-dems-and-delineating-watersheds-5-pts.html#cb189-1" tabindex="-1"></a><span class="fu">tmap_mode</span>(<span class="st">&quot;plot&quot;</span>)</span>
<span id="cb189-2"><a href="downloading-dems-and-delineating-watersheds-5-pts.html#cb189-2" tabindex="-1"></a></span>
<span id="cb189-3"><a href="downloading-dems-and-delineating-watersheds-5-pts.html#cb189-3" tabindex="-1"></a><span class="fu">tm_shape</span>(clip_hillshade) <span class="sc">+</span></span>
<span id="cb189-4"><a href="downloading-dems-and-delineating-watersheds-5-pts.html#cb189-4" tabindex="-1"></a>  <span class="fu">tm_raster</span>(<span class="at">style =</span> <span class="st">&quot;cont&quot;</span>, <span class="at">palette =</span> <span class="st">&quot;-Greys&quot;</span>, <span class="at">legend.show =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb189-5"><a href="downloading-dems-and-delineating-watersheds-5-pts.html#cb189-5" tabindex="-1"></a>  <span class="fu">tm_scale_bar</span>() <span class="sc">+</span></span>
<span id="cb189-6"><a href="downloading-dems-and-delineating-watersheds-5-pts.html#cb189-6" tabindex="-1"></a>  <span class="fu">tm_shape</span>(clip_dem) <span class="sc">+</span></span>
<span id="cb189-7"><a href="downloading-dems-and-delineating-watersheds-5-pts.html#cb189-7" tabindex="-1"></a>  <span class="fu">tm_raster</span>(<span class="at">legend.show =</span> <span class="cn">FALSE</span>, <span class="at">palette =</span> <span class="st">&quot;-viridis&quot;</span>, <span class="at">alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb189-8"><a href="downloading-dems-and-delineating-watersheds-5-pts.html#cb189-8" tabindex="-1"></a>  <span class="fu">tm_shape</span>(streams_shp) <span class="sc">+</span> </span>
<span id="cb189-9"><a href="downloading-dems-and-delineating-watersheds-5-pts.html#cb189-9" tabindex="-1"></a>  <span class="fu">tm_lines</span>(<span class="at">col =</span> <span class="st">&quot;blue&quot;</span>, <span class="at">lwd =</span> <span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb189-10"><a href="downloading-dems-and-delineating-watersheds-5-pts.html#cb189-10" tabindex="-1"></a>  <span class="fu">tm_scale_bar</span>() <span class="sc">+</span></span>
<span id="cb189-11"><a href="downloading-dems-and-delineating-watersheds-5-pts.html#cb189-11" tabindex="-1"></a>  <span class="fu">tm_shape</span>(pp) <span class="sc">+</span></span>
<span id="cb189-12"><a href="downloading-dems-and-delineating-watersheds-5-pts.html#cb189-12" tabindex="-1"></a>  <span class="fu">tm_dots</span>(<span class="at">col =</span> <span class="st">&quot;red&quot;</span>, <span class="at">size =</span> <span class="fl">0.25</span>) <span class="sc">+</span></span>
<span id="cb189-13"><a href="downloading-dems-and-delineating-watersheds-5-pts.html#cb189-13" tabindex="-1"></a>  <span class="fu">tm_layout</span>(<span class="at">title =</span> <span class="st">&quot;Bozeman Creek </span><span class="sc">\n</span><span class="st">Watershed&quot;</span>) <span class="sc">+</span></span>
<span id="cb189-14"><a href="downloading-dems-and-delineating-watersheds-5-pts.html#cb189-14" tabindex="-1"></a>  <span class="fu">tm_compass</span>(<span class="at">type =</span> <span class="st">&quot;arrow&quot;</span>, <span class="at">position =</span> <span class="fu">c</span>(<span class="st">&quot;center&quot;</span>, <span class="st">&quot;bottom&quot;</span>))</span></code></pre></div>
<p><img src="bookdown.Rprog_files/figure-html/unnamed-chunk-178-1.png" width="672" /></p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="for-loops.html" class="navigation navigation-prev navigation-unique" aria-label="Previous page"><i class="fa fa-angle-left"></i></a>

    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/tpcovino/ensc_445_545_bookdown/edit/master/16_dem_download_delineation.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": "https://github.com/tpcovino/ensc_445_545_bookdown/blob/master/16_dem_download_delineation.Rmd",
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
